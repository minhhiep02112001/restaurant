(function($,undefined){'use strict';$.VAMTAM=$.VAMTAM||{};$.VAMTAM.ResponsiveElements=(function(){var self={elementsAttributeName:'data-respond',maxRefreshRate:5,defaults:{start:100,end:900,interval:50},init:function(){$(function(){self.el={window:$(window),responsive_elements:$('['+self.elementsAttributeName+']')};self.events();});$(window).bind('vamtam-ajax-content-loaded',self.resetElements);},resetElements:function(){self.el.responsive_elements=$('['+self.elementsAttributeName+']');self.unbind_events();self.events();},parseOptions:function(options_string){if(!options_string)return false;this._options_cache=this._options_cache||{};if(this._options_cache[options_string])return this._options_cache[options_string];var options_array=options_string.replace(/\s+/g,'').split(';'),options_object={};for(var i=0;i<options_array.length;i++){if(!options_array[i])continue;var property_array=(options_array[i]).split(':');var key=property_array[0];var value=property_array[1];if(value.slice(-2)==='px'){value=value.replace('px','');}
if(!isNaN(value)){value=parseInt(value,10);}
options_object[key]=value;}
this._options_cache[options_string]=options_object;return options_object;},generateBreakpointsOnAllElements:function(){self.el.responsive_elements.each(function(i,_el){self.generateBreakpointsOnElement($(_el));});},generateBreakpointsOnElement:function(_el){var options_string=_el.attr(this.elementsAttributeName),options=this.parseOptions(options_string)||this.defaults,breakpoints=this.generateBreakpoints(_el.width(),options);this.cleanUpBreakpoints(_el);_el.addClass(breakpoints.join(' '));},generateBreakpoints:function(width,options){var start=options.start,end=options.end,interval=options.interval,i=interval>start?interval:~~(start/interval)*interval,classes=[];while(i<=end){if(i<width)classes.push('gt'+i);if(i>width)classes.push('lt'+i);if(i===width)classes.push('lt'+i);i+=interval;}
return classes;},parseBreakpointClasses:function(breakpoints_string){var classes=breakpoints_string.split(/\s+/),breakpointClasses=[];$(classes).each(function(i,className){if(className.match(/^gt\d+|lt\d+$/))breakpointClasses.push(className);});return breakpointClasses;},cleanUpBreakpoints:function(_el){var classesToCleanup=this.parseBreakpointClasses(_el.attr('class'));_el.removeClass(classesToCleanup.join(' '));},events:function(){this.generateBreakpointsOnAllElements();this.el.window.bind('resize.responsive_elements',this.utils.debounce(this.generateBreakpointsOnAllElements,this.maxRefreshRate));},unbind_events:function(){this.el.window.unbind('resize.responsive_elements');},utils:{debounce:function(func,wait,immediate){var result;var timeout=null;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)result=func.apply(context,args);};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args);return result;};}}};return self;})();$.VAMTAM.ResponsiveElements.init();})(jQuery);